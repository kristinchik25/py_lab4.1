# py_lab4.1
# Лабораторная работа 4.1 Чтение данных из файла и их обработка. Запись результатов обработки в файл

# Цель работы
Научиться работать с файлами, выполнять их чтение, запись и
манипуляцию, а также освоить методы сериализации и десериализации данных с
использованием популярных форматов хранения, таких как CSV и JSON.

# Задачи
- Изучить структуру файловой системы, свойства файлов, виды путей к файлам (абсолютный и относительный).
- Освоить операции с файлами в Python: открытие, чтение, запись, закрытие.
- Разобраться с файловыми объектами и их основными свойствами и
методами.
- Изучить методы работы с файлами: чтение файла целиком, построчное
чтение, запись строк в файл.
- Познакомиться с концепцией сериализации и десериализации данных.
- Изучить популярные форматы сериализации: CSV и JSON.
- Научиться использовать модуль pickle для сериализации данных в Python.
- Решить практические задачи по обработке файлов и сериализации данных.

# Вариант 12
## № 4.1.2
Дан файл, полученный на выходе задачи № 4.1.1:
- загрузите список чисел;
- вычислите их сумму и максимум и допишите их в файл.
Выполнив программу несколько раз, убедитесь, что новые значения учитываются
при подсчете.
Если файл прочитать не удается, программа должна прекратить чтение и сообщить
об этом пользователю.
````
#№ 4.1.2
#Дан файл, полученный на выходе задачи № 4.1.1:
#- загрузите список чисел;
#- вычислите их сумму и максимум и допишите их в файл.
#Выполнив программу несколько раз, убедитесь, что новые значения учитываются
#при подсчете.
#Если файл прочитать не удается, программа должна прекратить чтение и сообщить
#об этом пользователю.


def load_data(filename):
    """Загрузить список вещественных чисел из файла 'filename'.

    Функция не обрабатывает исключения."""
    with open(filename, 'r', encoding='utf-8') as f:
        numbers = []
        for line in f:
            # Удаляем пробельные символы и пропускаем пустые строки
            stripped = line.strip()
            if stripped:
                numbers.append(float(stripped))
        return numbers


def append_to_file(values, filename):
    """Дописать данные в файл.

    Параметры:
        - values (list of float): список вещественных чисел;
        - filename (str): имя файла.
    """
    with open(filename, 'a', encoding='utf-8') as f:
        for value in values:
            f.write(str(value) + '\n')


try:
    filename = input("Введите имя файла: ")
    values = load_data(filename)

    # Допустим, требуется добавить квадраты прочитанных чисел:
    squares = [x ** 2 for x in values]
    append_to_file(squares, filename)

    print(f"В файл '{filename}' дописаны квадраты чисел.")

except FileNotFoundError as err:
    print("Указанный файл не существует.")

except (IOError, ValueError) as err:
    print("Ошибка при чтении/сохранении файла с данными:", err)

except Exception as err:
    print("Произошла ошибка!")
    print("Тип:", type(err))
    print("Описание:", err)
````

# Результат
<img width="428" height="56" alt="image" src="https://github.com/user-attachments/assets/d6fe7818-05ee-4045-960f-9d674ad4bb6f" />

# Выводы
Цель работы достигнута: освоены основные операции с файлами - чтение, запись и манипуляции над ними. Изучены методы сериализации и десериализации данных с использованием форматов CSV и JSON. Полученные навыки позволяют эффективно работать с различными типами структурированных данных в Python.
